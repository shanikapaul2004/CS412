<!--
    file: show_post.html
    name: Shanika Paul
    email: shanikap@bu.edu
    date: October 19, 2025
    description: Template to display a single post with all associated photos, caption, likes, and comments.
-->

{% extends 'mini_insta/base.html' %}

{% block content %}
<h2>Post by {{ post.profile.username }}</h2>

<main>
    <article style="background: white; border: 1px solid #dbdbdb; border-radius: 8px; padding: 30px; max-width: 800px; margin: 20px auto;">
        <!-- profile information -->
        <div style="display: flex; align-items: center; margin-bottom: 20px;">
            <img src="{{ post.profile.profile_image_url }}" alt="{{ post.profile.username }}" 
                 style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;">
            <strong>{{ post.profile.username }}</strong>
        </div>

        <!-- display all the photos for that post -->
        {% for photo in post.get_all_photos %}
        <div style="margin-bottom: 20px;">
            <img src="{{ photo.get_image_url }}" alt="Post photo" 
                 style="width: 100%; border-radius: 8px;">
        </div>
        {% endfor %}

        <!-- like count  -->
        <div style="margin-top: 15px; margin-bottom: 10px;">
            <strong>{{ post.get_likes.count }} likes</strong>
        </div>

        <!-- caption and timestamp -->
        <div style="margin-bottom: 15px;">
            <p><strong>{{ post.profile.username }}</strong> {{ post.caption }}</p>
            <small style="color: #8e8e8e;">{{ post.timestamp|date:"F d, Y at g:i A" }}</small>
        </div>

        <!-- comments section -->
        <div style="border-top: 1px solid #dbdbdb; padding-top: 15px;">
            <h4>Comments</h4>
            {% for comment in post.get_all_comments %}
            <div style="margin-bottom: 10px;">
                <p style="margin: 5px 0;">
                    <strong>{{ comment.profile.username }}</strong> {{ comment.text }}
                </p>
                <small style="color: #8e8e8e;">{{ comment.timestamp|date:"M d, Y at g:i A" }}</small>
            </div>
            {% empty %}
            <p style="color: #8e8e8e;">No comments yet.</p>
            {% endfor %}
        </div>

        <!-- update and delete button  -->
        <div style="margin-top: 20px; border-top: 1px solid #dbdbdb; padding-top: 15px;">
            <a href="{% url 'update_post' post.pk %}" 
               style="background-color: #0095f6; color: white; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-weight: 600; margin-right: 10px;">
                Update
            </a>
            <a href="{% url 'delete_post' post.pk %}" 
               style="background-color: #ed4956; color: white; padding: 8px 16px; border-radius: 8px; text-decoration: none; font-weight: 600;">
                Delete
            </a>
        </div>
    </article>
</main>
{% endblock %}